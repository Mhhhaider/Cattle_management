{% include 'base3.html' %}
{% load static %}

<body>
<main id="main" class="main">

<section class="section">
  <div class="row">

    <!-- Total Medicines -->
    <div class="col-lg-3 col-md-6">
      <div class="card info-card bg-light shadow-sm">
        <div class="card-body text-center">
          <h6 class="fw-bold">Total Medicines</h6>
          <h3 class="text-primary">{{ total_medicines }}</h3>
        </div>
      </div>
    </div>

    <!-- Total Stock -->
    <div class="col-lg-3 col-md-6">
      <div class="card info-card bg-light shadow-sm">
        <div class="card-body text-center">
          <h6 class="fw-bold">Total Stock</h6>
          <h3 class="text-success">{{ total_stock }}</h3>
        </div>
      </div>
    </div>

    <!-- Low Stock -->
    <div class="col-lg-3 col-md-6">
      <div class="card info-card bg-light shadow-sm">
        <div class="card-body text-center">
          <h6 class="fw-bold">Low Stock</h6>
          <h3 class="text-warning">{{ low_stock_count }}</h3>
        </div>
      </div>
    </div>

    <!-- Expired -->
    <div class="col-lg-3 col-md-6">
      <div class="card info-card bg-light shadow-sm">
        <div class="card-body text-center">
          <h6 class="fw-bold">Expired</h6>
          <h3 class="text-danger">{{ expired_count }}</h3>
        </div>
      </div>
    </div>

  </div>

  <!-- Stock Table -->
  <div class="card mt-4">
    <div class="card-body">
      <h5 class="card-title">ðŸ’Š Medicine Stock Details</h5>

      <div class="table-responsive">
        <table class="table table-bordered table-hover align-middle">
          <thead class="table-dark">
            <tr>
              <th>#</th>
              <th>Medicine</th>
              <th>Batch</th>
              <th>Stock</th>
              <th>Unit</th>
              <th>Expiry Date</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            {% for item in inventories %}
            <tr>
              <td>{{ forloop.counter }}</td>
              <td>{{ item.medicine.name }}</td>
              <td>{{ item.batch_no }}</td>
              <td>{{ item.quantity_available }}</td>
              <td>{{ item.medicine.unit }}</td>
              <td>{{ item.expiry_date }}</td>
              <td>
                {% if item.quantity_available <= 0 %}
                  <span class="badge bg-danger">Out of Stock</span>
                {% elif item.quantity_available <= 10 %}
                  <span class="badge bg-warning">Low Stock</span>
                {% elif item.expiry_date and item.expiry_date < today %}
                  <span class="badge bg-danger">Expired</span>
                {% else %}
                  <span class="badge bg-success">Available</span>
                {% endif %}
              </td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="7" class="text-center text-muted">
                No inventory data available
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

    </div>
  </div>

</section>
</main>

<footer class="footer">
  <div class="copyright">
    Â© Copyright <strong>J N Roadlines LLP</strong>
  </div>
  <div class="credits">
    Designed by <strong>JTECH VENTURES</strong>
  </div>
</footer>

<a href="#" class="back-to-top d-flex align-items-center justify-content-center">
  <i class="bi bi-arrow-up-short"></i>
</a>

</body>
