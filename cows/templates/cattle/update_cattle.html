{% include 'base3.html' %}
{% load static %}

<body>
<main id="main" class="main">

<section class="section">
  <div class="row">
    <div class="col-lg-12">
      <div class="card bg-light">
        <div class="card-body py-4">

<section class="main-sec">

{% if messages %}
  <div class="container mt-3">
    {% for message in messages %}
      <div class="alert alert-danger {{ message.tags }} alert-dismissible fade show" role="alert">
        <h5 class="text-center">{{ message }}</h5>
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
      </div>
    {% endfor %}
  </div>
{% endif %}

<h3>Update Cattle</h3>

<div class="container">
  <div class="row form-div mt-4">

<form method="POST" action="{% url 'update_cattle' cattle.id %}">
  {% csrf_token %}
  <div class="row">

    <!-- Batch -->
    <div class="col-lg-3 mb-3">
      <label class="form-label fw-bold">Batch</label>
      <select name="batch" id="batchSelect"
              class="form-control border-0 shadow-sm py-3 rounded-0" required>
        <option>Select Batch</option>
        {% for batch in batches %}
          <option value="{{ batch.id }}" {% if cattle.batch.id == batch.id %}selected{% endif %}>
            {{ batch.name }}
          </option>
        {% endfor %}
      </select>
    </div>

    <!-- Tag Name -->
    <div class="col-lg-3 mb-3">
      <label class="form-label fw-bold">Tag Name</label>
      <input type="text" name="name"
             class="form-control border-0 shadow-sm py-3 rounded-0"
             value="{{ cattle.name }}" required>
    </div>

    <!-- Age -->
    <div class="col-lg-3 mb-3">
      <label class="form-label fw-bold">Age</label>
      <input type="number" name="age"
             class="form-control border-0 shadow-sm py-3 rounded-0"
             value="{{ cattle.age }}" required>
    </div>

    <!-- Breed -->
    <div class="col-lg-3 mb-3">
      <label class="form-label fw-bold">Breed</label>
      <select name="breed"
              class="form-control border-0 shadow-sm py-3 rounded-0" required>
        {% for breed in breeds %}
          <option value="{{ breed }}" {% if cattle.breed == breed %}selected{% endif %}>
            {{ breed }}
          </option>
        {% endfor %}
      </select>
    </div>

    <!-- Milk -->
    <div class="col-lg-3 mb-3">
      <label class="form-label fw-bold">Milk (Ltr)</label>
      <input type="number" step="0.01" name="milk"
             class="form-control border-0 shadow-sm py-3 rounded-0"
             value="{{ cattle.milk }}">
    </div>

    <!-- Purchase Date -->
    <div class="col-lg-3 mb-3">
      <label class="form-label fw-bold">Purchase Date</label>
      <input type="date" name="purchase"
             class="form-control border-0 shadow-sm py-3 rounded-0"
             value="{{cattle.purchase|date:'Y-m-d'}}">
    </div>

    <!-- Purchase Amount -->
    <div class="col-lg-3 mb-3">
      <label class="form-label fw-bold">Purchase Amount</label>
      <input type="number" name="purchase_amount"
             class="form-control border-0 shadow-sm py-3 rounded-0"
             value="{{ cattle.purchase_amount }}">
    </div>

    <!-- Breeding -->
    <div class="col-lg-3 mb-3">
      <label class="form-label fw-bold">Breeding</label>
      <select name="breeding"
              class="form-control border-0 shadow-sm py-3 rounded-0">
        {% for state in breeding_states %}
          <option value="{{ state }}" {% if cattle.breeding == state %}selected{% endif %}>
            {{ state }}
          </option>
        {% endfor %}
      </select>
    </div>

    <!-- Health Status -->
    <div class="col-lg-3 mb-3">
      <label class="form-label fw-bold">Health Status</label>
      <select class="form-control border-0 shadow-sm py-3 rounded-0" name="health_status" required>
        <option value="Healthy" {% if cattle.health_status == "Healthy" %}selected{% endif %}>Healthy</option>
        <option value="Sick" {% if cattle.health_status == "Sick" %}selected{% endif %}>Sick</option>
      </select>
    </div>

    <!-- Convincing Date -->
    <div class="col-lg-3 mb-3">
      <label class="form-label fw-bold">Convincing Date</label>
      <input type="date" name="convincing_date"
             class="form-control border-0 shadow-sm py-3 rounded-0"
             value="{{cattle.convincing_date|date:'Y-m-d'}}">
    </div>

    <!-- Result -->
    <div class="col-lg-3 mb-3">
      <label class="form-label fw-bold">Result</label>
      <input type="text" name="result"
             class="form-control border-0 shadow-sm py-3 rounded-0"
             value="{{ cattle.result }}">
    </div>

    <!-- Milk Days -->
    <div class="col-lg-3 mb-3">
      <label class="form-label fw-bold">Milk Day 15</label>
      <input type="number" name="milk_day_15"
             class="form-control border-0 shadow-sm py-3 rounded-0"
             value="{{ cattle.milk_day_15 }}">
    </div>

    <div class="col-lg-3 mb-3">
      <label class="form-label fw-bold">Milk Day 30</label>
      <input type="number" name="milk_day_30"
             class="form-control border-0 shadow-sm py-3 rounded-0"
             value="{{ cattle.milk_day_30 }}">
    </div>

    <div class="col-lg-3 mb-3">
      <label class="form-label fw-bold">Milk Day 60</label>
      <input type="number" name="milk_day_60"
             class="form-control border-0 shadow-sm py-3 rounded-0"
             value="{{ cattle.milk_day_60 }}">
    </div>

    <div class="col-lg-3 mb-3">
      <label class="form-label fw-bold">Milk Day 75</label>
      <input type="number" name="milk_day_75"
             class="form-control border-0 shadow-sm py-3 rounded-0"
             value="{{ cattle.milk_day_75 }}">
    </div>

    <!-- Outward Date -->
    <div class="col-lg-3 mb-3">
      <label class="form-label fw-bold">Outward Date</label>
      <input type="date" name="outward_date"
             class="form-control border-0 shadow-sm py-3 rounded-0"
             value="{{cattle.outward_date|date:'Y-m-d'}}">
    </div>

  </div>

  <div class="text-center mt-3">
    <button class="btn btn-success px-4" type="submit">Update Cattle</button>
    {% comment %} <a href="{% url 'cattle_list' %}" class="btn btn-primary px-4">Back to List</a> {% endcomment %}
  </div>

</form>

  </div>
</div>

</section>

        </div>
      </div>
    </div>
  </div>
</section>

</main>

<footer class="footer">
  <div class="copyright">
    Â© Copyright <strong>J N Roadlines LLP</strong> All Rights Reserved
  </div>
  <div class="credits">
    Designed by <strong>JTECH VENTURES</strong>
  </div>
</footer>

<a href="#" class="back-to-top d-flex align-items-center justify-content-center">
  <i class="bi bi-arrow-up-short"></i>
</a>

</body>
